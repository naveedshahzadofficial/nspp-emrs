"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[210],{7577:(e,r,l)=>{l.d(r,{M:()=>n});var s=l(8748),t=l(8542),o=l.n(t);function n(){return{filterData:function(e,r){r=Object.keys(r).reduce((function(e,l){var s=r[l];return""!==s&&null!=s&&(e[l]=s),e}),{}),s.Nd.get(route(e),r,{preserveScroll:!0,preserveState:!0,replace:!0})},destroy:function(e,r){o().fire({text:"Are you sure you want to delete this?",icon:"warning",showCancelButton:!0,confirmButtonText:"Delete",buttonsStyling:!1,customClass:{confirmButton:"btn fw-bold btn-danger",cancelButton:"btn fw-bold btn-secondary"}}).then((function(l){l.isConfirmed&&s.Nd.delete(route(e,r),{preserveScroll:!0})}))},toggleStatus:function(e,r){o().fire({text:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonText:null!=r&&r.status?"Deactivate":"Activate",buttonsStyling:!1,customClass:{confirmButton:null!=r&&r.status?"btn fw-bold btn-danger":"btn fw-bold btn-success",cancelButton:"btn fw-bold btn-secondary"}}).then((function(l){l.isConfirmed&&s.Nd.delete(route(e,null==r?void 0:r.id),{preserveScroll:!0})}))},revoke:function(e,r,l){o().fire({text:"Are you sure you want to revoke this?",icon:"warning",showCancelButton:!0,confirmButtonText:"Revoke",buttonsStyling:!1,customClass:{confirmButton:"btn fw-bold btn-danger",cancelButton:"btn fw-bold btn-secondary"}}).then((function(t){t.isConfirmed&&s.Nd.delete(route(e,[r,l]),{preserveScroll:!0})}))}}}},8706:(e,r,l)=>{l.d(r,{Z:()=>n});var s=l(821),t={key:0,class:"fv-plugins-message-container"},o={class:"fv-help-block"};const n=(0,s.aZ)({__name:"ServerErrorMessage",props:{error:String},setup:function(e){return function(r,l){return e.error?((0,s.wg)(),(0,s.iD)("div",t,[(0,s._)("div",o,[(0,s._)("span",null,(0,s.zw)(e.error),1)])])):(0,s.kq)("",!0)}}})},7210:(e,r,l)=>{l.r(r),l.d(r,{default:()=>se});var s=l(821),t=l(8706),o=l(8748),n=l(7577),a={class:"d-flex flex-column-fluid"},i={id:"kt_content_container",class:"container-fluid"},u={class:"card card-custom"},c={class:"card-body"},d={class:"row mb-10"},m={class:"col-lg-6"},b=(0,s._)("label",{class:"required form-label"},"Name",-1),p={class:"col-lg-6"},f=(0,s._)("label",{class:"required form-label"},"Username",-1),v={class:"row mb-10"},_={class:"col-lg-6"},w=(0,s._)("label",{class:"required form-label"},"Email",-1),U={class:"col-lg-6"},g=(0,s._)("label",{class:"required form-label"},"Status",-1),S={class:"d-flex"},y=["onUpdate:modelValue","value","id"],k=["for"],h={class:"row mb-10"},x={class:"col-lg-6"},C=(0,s._)("label",{class:"required form-label"},"Password",-1),V={class:"col-lg-6"},W=(0,s._)("label",{class:"required form-label"},"Confirm Password",-1),B={class:"row mb-10"},P={class:"col-lg-12"},Z=(0,s._)("label",{class:"form-label"},"Institute",-1),A={class:"row mb-10"},D={class:"col-lg-12"},q=(0,s._)("label",{class:"form-label"},"Roles",-1),N={class:"row mb-10"},M={class:"col-lg-12"},R=(0,s._)("label",{class:"form-label"},"Permissions",-1),H={class:"card-footer"},Y=["disabled","data-kt-indicator"],z=[(0,s._)("span",{class:"indicator-label"}," Update ",-1),(0,s._)("span",{class:"indicator-progress"},[(0,s.Uk)(" Please wait... "),(0,s._)("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1)],E=(0,s._)("div",{class:"card-header mt-10"},[(0,s._)("div",{class:"card-title"},[(0,s._)("span",{class:"fw-semibold"},"User Roles")])],-1),T={class:"card-body"},I={class:"table-responsive"},K={class:"table table-row-bordered table-row-gray-300 align-middle gs-0 gy-4"},j=(0,s._)("thead",null,[(0,s._)("tr",{class:"fw-semibold fs-6 text-gray-800"},[(0,s._)("th",null,"Role Name"),(0,s._)("th",{class:"text-center w-200px"},"Action")])],-1),O={class:"text-center"},F=["onClick"],G=[(0,s._)("i",{class:"fas fa-undo"},null,-1)],L=(0,s._)("div",{class:"card-header"},[(0,s._)("div",{class:"card-title"},[(0,s._)("span",{class:"fw-semibold"},"User Permissions")])],-1),J={class:"card-body"},Q={class:"table-responsive"},X={class:"table table-row-bordered table-row-gray-300 align-middle gs-0 gy-4"},$=(0,s._)("thead",null,[(0,s._)("tr",{class:"fw-semibold fs-6 text-gray-800"},[(0,s._)("th",null,"Permission Name"),(0,s._)("th",{class:"text-center w-200px"},"Action")])],-1),ee={class:"text-center"},re=["onClick"],le=[(0,s._)("i",{class:"fas fa-undo"},null,-1)];const se=(0,s.aZ)({__name:"Edit",props:{user:{type:Object,required:!0},institutes:Array,roles:Array,permissions:Array},setup:function(e){var r,l,se,te,oe,ne=e,ae=(0,n.M)().revoke,ie=(0,o.cI)({name:null===(r=ne.user)||void 0===r?void 0:r.name,username:null===(l=ne.user)||void 0===l?void 0:l.username,email:null===(se=ne.user)||void 0===se?void 0:se.email,status:null===(te=ne.user)||void 0===te?void 0:te.status,password:"",password_confirmation:"",institute_id:null===(oe=ne.user)||void 0===oe?void 0:oe.institute_id,roles:[],permissions:[]});return(0,s.bv)((function(){var e,r;ie.permissions=null===(e=ne.user)||void 0===e?void 0:e.permissions,ie.roles=null===(r=ne.user)||void 0===r?void 0:r.roles})),(0,s.YP)((function(){return ne.user}),(function(){var e,r;ie.permissions=null===(e=ne.user)||void 0===e?void 0:e.permissions,ie.roles=null===(r=ne.user)||void 0===r?void 0:r.roles})),function(r,l){var o=(0,s.up)("Head"),n=(0,s.up)("Toolbar"),se=(0,s.up)("v-select"),te=(0,s.up)("Link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(o,{title:"Update User"}),(0,s.Wm)(n,{title:"Update User",buttons:[{label:"Back",link:r.route("users.index")}],breadcrumbs:[{label:"System Settings",link:"#"},{label:"Users",link:r.route("users.index")},{label:"Update",link:null}]},null,8,["buttons","breadcrumbs"]),(0,s._)("div",a,[(0,s._)("div",i,[(0,s._)("div",u,[(0,s._)("form",{onSubmit:l[8]||(l[8]=(0,s.iM)((function(l){var t;return(0,s.SU)(ie).put(r.route("users.update",null===(t=e.user)||void 0===t?void 0:t.id))}),["prevent"]))},[(0,s._)("div",c,[(0,s._)("div",d,[(0,s._)("div",m,[b,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":l[0]||(l[0]=function(e){return(0,s.SU)(ie).name=e}),type:"text",class:"form-control form-control-sm",placeholder:"Full Name"},null,512),[[s.nr,(0,s.SU)(ie).name]]),(0,s.Wm)(t.Z,{error:(0,s.SU)(ie).errors.name},null,8,["error"])]),(0,s._)("div",p,[f,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":l[1]||(l[1]=function(e){return(0,s.SU)(ie).username=e}),type:"text",class:"form-control form-control-sm",placeholder:"Username"},null,512),[[s.nr,(0,s.SU)(ie).username]]),(0,s.Wm)(t.Z,{error:(0,s.SU)(ie).errors.username},null,8,["error"])])]),(0,s._)("div",v,[(0,s._)("div",_,[w,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":l[2]||(l[2]=function(e){return(0,s.SU)(ie).email=e}),type:"email",class:"form-control form-control-sm",placeholder:"Email"},null,512),[[s.nr,(0,s.SU)(ie).email]]),(0,s.Wm)(t.Z,{error:(0,s.SU)(ie).errors.email},null,8,["error"])]),(0,s._)("div",U,[g,(0,s._)("div",S,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)([{id:1,name:"Active"},{id:0,name:"Inactive"}],(function(e){return(0,s._)("div",{key:e.id,class:"form-check form-check-custom form-check-sm me-10"},[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":function(e){return(0,s.SU)(ie).status=e},value:e.id,class:"form-check-input",name:"status",type:"radio",id:"status_".concat(e.id)},null,8,y),[[s.G2,(0,s.SU)(ie).status]]),(0,s._)("label",{class:"form-check-label",for:"status_".concat(e.id)},(0,s.zw)(e.name),9,k)])})),64))]),(0,s.Wm)(t.Z,{error:(0,s.SU)(ie).errors.status},null,8,["error"])])]),(0,s._)("div",h,[(0,s._)("div",x,[C,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":l[3]||(l[3]=function(e){return(0,s.SU)(ie).password=e}),type:"password",class:"form-control form-control-sm",placeholder:"Password"},null,512),[[s.nr,(0,s.SU)(ie).password]]),(0,s.Wm)(t.Z,{error:(0,s.SU)(ie).errors.password},null,8,["error"])]),(0,s._)("div",V,[W,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":l[4]||(l[4]=function(e){return(0,s.SU)(ie).password_confirmation=e}),type:"password",class:"form-control form-control-sm",placeholder:"Confirm Password"},null,512),[[s.nr,(0,s.SU)(ie).password_confirmation]]),(0,s.Wm)(t.Z,{error:(0,s.SU)(ie).errors.password_confirmation},null,8,["error"])])]),(0,s._)("div",B,[(0,s._)("div",P,[Z,(0,s.Wm)(se,{modelValue:(0,s.SU)(ie).institute_id,"onUpdate:modelValue":l[5]||(l[5]=function(e){return(0,s.SU)(ie).institute_id=e}),options:e.institutes,reduce:function(e){return e.id},label:"name",class:"v-select-custom",placeholder:"Please Select"},null,8,["modelValue","options","reduce"]),(0,s.Wm)(t.Z,{error:(0,s.SU)(ie).errors.institute_id},null,8,["error"])])]),(0,s._)("div",A,[(0,s._)("div",D,[q,(0,s.Wm)(se,{modelValue:(0,s.SU)(ie).roles,"onUpdate:modelValue":l[6]||(l[6]=function(e){return(0,s.SU)(ie).roles=e}),options:e.roles,multiple:"",label:"name",class:"v-select-custom",placeholder:"Please Select"},null,8,["modelValue","options"]),(0,s.Wm)(t.Z,{error:(0,s.SU)(ie).errors.roles},null,8,["error"])])]),(0,s._)("div",N,[(0,s._)("div",M,[R,(0,s.Wm)(se,{modelValue:(0,s.SU)(ie).permissions,"onUpdate:modelValue":l[7]||(l[7]=function(e){return(0,s.SU)(ie).permissions=e}),options:e.permissions,multiple:"",label:"name",class:"v-select-custom",placeholder:"Please Select"},null,8,["modelValue","options"]),(0,s.Wm)(t.Z,{error:(0,s.SU)(ie).errors.permissions},null,8,["error"])])])]),(0,s._)("div",H,[(0,s._)("button",{type:"submit",ref:"submitButton",class:"btn btn-success me-2",disabled:(0,s.SU)(ie).processing,"data-kt-indicator":(0,s.SU)(ie).processing?"on":"off"},z,8,Y),(0,s.Wm)(te,{href:r.route("users.index"),class:"btn btn-secondary"},{default:(0,s.w5)((function(){return[(0,s.Uk)("Cancel")]})),_:1},8,["href"])])],32),E,(0,s._)("div",T,[(0,s._)("div",I,[(0,s._)("table",K,[j,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.user.roles,(function(r){return(0,s.wg)(),(0,s.iD)("tr",{key:r.id},[(0,s._)("td",null,(0,s.zw)(r.name),1),(0,s._)("td",O,[(0,s._)("a",{onClick:(0,s.iM)((function(l){return(0,s.SU)(ae)("users.roles.revoke",e.user.id,r.id)}),["prevent"]),class:"btn btn-icon btn-danger btn-circle btn-sm me-2","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Revoke"},G,8,F)])])})),128))])])])]),L,(0,s._)("div",J,[(0,s._)("div",Q,[(0,s._)("table",X,[$,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.user.permissions,(function(r){return(0,s.wg)(),(0,s.iD)("tr",{key:r.id},[(0,s._)("td",null,(0,s.zw)(r.name),1),(0,s._)("td",ee,[(0,s._)("a",{onClick:(0,s.iM)((function(l){return(0,s.SU)(ae)("users.permissions.revoke",e.user.id,r.id)}),["prevent"]),class:"btn btn-icon btn-danger btn-circle btn-sm me-2","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Revoke"},le,8,re)])])})),128))])])])])])])])],64)}}})}}]);